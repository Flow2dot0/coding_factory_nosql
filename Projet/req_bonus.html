<!DOCTYPE html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
    integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/default.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/style.css" media="all" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300" rel="stylesheet">


  <title>CF - NoSQL</title>
</head>

<body class="container-fluid pl-0 pr-0 mt-5">
  <div class="row">
    <div class="col-12">
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
          aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav">
            <li class="nav-item active">
              <a class="nav-link" href="index.html">Accueil <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="board_agile.html">Board Agile</a>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="req_classic.html" id="navbarDropdownMenuLink"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Requête classique
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                <a class="dropdown-item" href="req_classic.html#r-1">I : Find()</a>
                <a class="dropdown-item" href="req_classic.html#r-2">II : Find()</a>
                <a class="dropdown-item" href="req_classic.html#r-3">III : Updatemany()</a>
                <a class="dropdown-item" href="req_classic.html#r-4">IV : Remove()</a>
                <a class="dropdown-item" href="req_classic.html#r-5">V : Insertmany()</a>
              </div>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="req_comp.html" id="navbarDropdownMenuLink"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Requête complexe
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                <a class="dropdown-item" href="req_comp.html#rc-1">I : Count()/Dep</a>
                <a class="dropdown-item" href="req_comp.html#rc-2">II : Aggregate()/10 1er Dep</a>
                <a class="dropdown-item" href="req_comp.html#rc-3">III : Aggregate()/ 10 villes</a>
                <a class="dropdown-item" href="req_comp.html#rc-4">VI : Explain()/stats Requête</a>
                <a class="dropdown-item" href="req_comp.html#rc-5">V : CreateIndex()/villes</a>
                <a class="dropdown-item" href="req_comp.html#rc-6">VI : Update()/Pays</a>
                <a class="dropdown-item" href="req_comp.html#rc-7">VII : Aggregate()/Nb équipements identiques</a>
                <a class="dropdown-item" href="req_comp.html#rc-8">VIII : Find()/ Activité Football</a>
                <a class="dropdown-item" href="req_comp.html#rc-9">IX : Aggregate()/Tri de A à Z</a>
                <a class="dropdown-item" href="req_comp.html#rc-10">X : Update()/ChampDoc</a>
              </div>
            </li>

            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="req_bonus.html" id="navbarDropdownMenuLink"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Requête bonus
                  </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" href="req_bonus.html#rb-1">I : ReplaceOne()</a>
                  <a class="dropdown-item" href="req_bonus.html#rb-2">II : Distinct()</a>
                  <a class="dropdown-item" href="req_bonus.html#rb-3">III : BulkWrite()</a>
                  <a class="dropdown-item" href="req_bonus.html#rb-4">VI : MapReduce()</a>
                  <!-- <a class="dropdown-item" href="req_bonus.html#rb-5">VI : Aggregate.avg()</a> -->
                </div>
              </li>

          </ul>
        </div>
      </nav>
    </div>
  </div>

  <div class="row">
        <div class="col-12 p-5 border-bottom rounded">

          <button type="button" class="btn btn-outline-danger btn-lg mb-4" id="rb-1">
            <h2>ReplaceOne()</h2>
          </button>
          <legend class="mb-3"><span style="font-weight: bold;">Requête :</span> je veux modifier un document avec replaceOne()
            </legend>
          <div class="bg-dark border rounded p-4" style="color: white;">
            <p>> try{
                db.activite.replaceOne({
                    "_id" : ObjectId("5cdbe8094e85d9f72c078991"),
                    "DepCode" : 1,
                    "DepLib" : "Ain",
                    "ComInsee" : 1001,
                    "ComLib" : "Abergement-Cl�menciat",
                    "EquipementId" : 64315,
                    "EquNbEquIdentique" : 1,
                    "ActCode" : 3701,
                    "ActLib" : "Handball / Mini hand / Handball de plage",
                    "EquActivitePraticable" : -1,
                    "EquActivitePratique" : -1,
                    "ActNivLib" : "Loisir - Entretien - Remise en forme"
                    },
                    {
                    "_id" : ObjectId("5cdbe8094e85d9f72c078991"),
                    "DepCode" : 1,
                    "DepLib" : "Ain",
                    "ComInsee" : 1001,
                    "ComLib" : "Abergement-Cl�menciat",
                    "EquipementId" : 64315,
                    "EquNbEquIdentique" : 1,
                    "ActCode" : 3701,
                    "ActLib" : "Handball / Mini hand / Handball de Pikachu",
                    "EquActivitePraticable" : -1,
                    "EquActivitePratique" : -1,
                    "ActNivLib" : "Loisir - Entretien - Remise en forme"
                    },
                    { upsert: true }
                );     
            }
            catch (e) {
                print(e);
            }
            
            </p>
            <p>{ "acknowledged" : true, "matchedCount" : 1, "modifiedCount" : 1 }</p>
          </div>

          <div class="d-flex justify-content-center border rounded">
            </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12 p-5 border-bottom rounded">

          <button type="button" class="btn btn-outline-danger btn-lg mb-4" id="rb-2">
            <h2>Distinct()</h2>
          </button>
          <legend class="mb-3"><span style="font-weight: bold;">Requête :</span> je veux distinguer chaque ID et connaitre le total des ID
            </legend>
          <div class="bg-dark border rounded p-4" style="color: white;">
            <p>> db.activite.distinct("_id")</p>
            <p>... 
              	ObjectId("5cdbe8114e85d9f72c0ef787"),
	ObjectId("5cdbe8114e85d9f72c0ef788"),
	ObjectId("5cdbe8114e85d9f72c0ef789"),
	ObjectId("5cdbe8114e85d9f72c0ef78a"),
	ObjectId("5cdbe8114e85d9f72c0ef78b"),
	ObjectId("5cdbe8114e85d9f72c0ef78c"),
	ObjectId("5cdbe8114e85d9f72c0ef78d")
]
            </p>
          </div>

          <div class="d-flex justify-content-center border rounded">
            </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12 p-5 border-bottom rounded">

          <button type="button" class="btn btn-outline-danger btn-lg mb-4" id="rb-3">
            <h2>BulkWrite()</h2>
          </button>
          <legend class="mb-3"><span style="font-weight: bold;">Requête :</span> je veux effectuer plusieurs opérations CRUD en une requête
            </legend>
          <div class="bg-dark border rounded p-4" style="color: white;">
            <p>> try {
                db.characters.bulkWrite(
                   [
                      { insertOne :
                         {
                            "document" :
                            {
                             "_id" : ObjectId("4cdbe8094e85d9f72c078991"),
                             "DepCode" : 1,
                             "DepLib" : "Ain",
                             "ComInsee" : 1001,
                             "ComLib" : "Abergement-Cl�menciat",
                             "EquipementId" : 64315,
                             "EquNbEquIdentique" : 1,
                             "ActCode" : 3701,
                             "ActLib" : "Handball / Mini hand / Handball de plage",
                             "EquActivitePraticable" : -1,
                             "EquActivitePratique" : -1,
                             "ActNivLib" : "Loisir - Entretien - Remise en forme"
                             }
                         }
                      },
                      { insertOne :
                         {
                            "document" :
                                    {
                             "_id" : ObjectId("4cdbe8094e85d9f72c078992"),
                             "DepCode" : 1,
                             "DepLib" : "Ain",
                             "ComInsee" : 1001,
                             "ComLib" : "Abergement-Cl�menciat",
                             "EquipementId" : 64315,
                             "EquNbEquIdentique" : 1,
                             "ActCode" : 3701,
                             "ActLib" : "Handball / Mini hand / Handball de plage",
                             "EquActivitePraticable" : -1,
                             "EquActivitePratique" : -1,
                             "ActNivLib" : "Loisir - Entretien - Remise en forme"
                             }
                         }
                      },
                      { updateOne :
                         {
                            "filter" : { "_id" : ObjectId("5cdbe8094e85d9f72c078991") },
                            "update" : { $set : { "myNewStatus" : "OK" } }
                         }
                      },
                      { deleteOne :
                         { "filter" : { "_id" : ObjectId("5cdbe8094e85d9f72c07898f")} }
                      },
                      { replaceOne :
                         {
                            "filter" : { "_id" : ObjectId("5cdbe8094e85d9f72c078998") },
                            "replacement" : { "ActCode" : "Football / Football en salle (TRY:1)" }
                         }
                      }
                   ]
                );
             }
             catch (e) {
                print(e);
             }</p>
            <p>
                {
                  "acknowledged" : true,
                  "deletedCount" : 0,
                  "insertedCount" : 2,
                  "matchedCount" : 0,
                  "upsertedCount" : 0,
                  "insertedIds" : {
                    "0" : ObjectId("4cdbe8094e85d9f72c078991"),
                    "1" : ObjectId("4cdbe8094e85d9f72c078992")
                  },
                  "upsertedIds" : {
                    
                  }
                }
            </p>
          </div>

          <div class="d-flex justify-content-center border rounded">

            </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12 p-5 border-bottom rounded">

          <button type="button" class="btn btn-outline-danger btn-lg mb-4" id="rb-4">
            <h2>MapReduce()</h2>
          </button>
          <legend class="mb-3"><span style="font-weight: bold;">Requête :</span> je veux crée une nouvelle collection contenant l'ensemble des activités se trouvant dans l'Ain avec leurs identifiants respectifs 
            </legend>
          <div class="bg-dark border rounded p-4" style="color: white;">
            <p>> db.activite.mapReduce(
                function() { emit(this._id, this.ActLib);},
                function(key, values) {return Array.sum(values)},
                {
                    query: {EquipementId: 64315},
                    out: "activite_ain"
                }
            )</p>
            <p>
                {
                  "result" : "activite_ain",
                  "timeMillis" : 1380,
                  "counts" : {
                    "input" : 5,
                    "emit" : 5,
                    "reduce" : 0,
                    "output" : 5
                  },
                  "ok" : 1
                }
            </p>
          </div>

          <div class="d-flex justify-content-center border rounded">

            </div>
        </div>
      </div>
  
      <!-- <div class="row">
          <div class="col-12 p-5 border-bottom rounded">
  
            <button type="button" class="btn btn-outline-danger btn-lg mb-4" id="rb-5">
              <h2>Aggregate.avg()</h2>
            </button>
            <legend class="mb-3"><span style="font-weight: bold;">Requête :</span> je veux la moyenne des équipements par département
              </legend>
            <div class="bg-dark border rounded p-4" style="color: white;">
              <p>> </p>
              <p>
              </p>
            </div>
  
            <div class="d-flex justify-content-center border rounded">
  
              </div>
          </div>
        </div> -->





      <footer class="bg-primary row d-flex flex-row justify-content-around p-3">
        <div class="col-2 d-flex text-center">
          <a href="https://github.com/Flow2dot0" style="color: white !important;" target="_blank">
            <img class="git"
              src="https://camo.githubusercontent.com/7710b43d0476b6f6d4b4b2865e35c108f69991f3/68747470733a2f2f7777772e69636f6e66696e6465722e636f6d2f646174612f69636f6e732f6f637469636f6e732f313032342f6d61726b2d6769746875622d3235362e706e67"
              alt="">
            <h4>Florian Gustin</h4>
          </a>
        </div>
        <div class="col-2 d-flex text-center">
          <a href="https://github.com/DoryanLievre" style="color: white !important;" target="_blank">
            <img class="git"
              src="https://camo.githubusercontent.com/7710b43d0476b6f6d4b4b2865e35c108f69991f3/68747470733a2f2f7777772e69636f6e66696e6465722e636f6d2f646174612f69636f6e732f6f637469636f6e732f313032342f6d61726b2d6769746875622d3235362e706e67"
              alt="">
            <h4>Doryan Lièvre</h4>
          </a>
        </div>
        <div class="col-2 d-flex text-center">
          <a href="https://github.com/CedricLphn" style="color: white !important;" target="_blank">
            <img class="git"
              src="https://camo.githubusercontent.com/7710b43d0476b6f6d4b4b2865e35c108f69991f3/68747470733a2f2f7777772e69636f6e66696e6465722e636f6d2f646174612f69636f6e732f6f637469636f6e732f313032342f6d61726b2d6769746875622d3235362e706e67"
              alt="">
            <h4>Cedric Leprohon</h4>
          </a>
        </div>
        <div class="col-2 d-flex text-center">
          <a href="" style="color: white !important;" target="_blank">
            <img class="git"
              src="https://camo.githubusercontent.com/7710b43d0476b6f6d4b4b2865e35c108f69991f3/68747470733a2f2f7777772e69636f6e66696e6465722e636f6d2f646174612f69636f6e732f6f637469636f6e732f313032342f6d61726b2d6769746875622d3235362e706e67"
              alt="">
            <h4>Karim Abdelhadi </h4>
          </a>
        </div>
      </footer>
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>

</html>